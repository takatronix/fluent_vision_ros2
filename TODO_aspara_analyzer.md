# TODO: FV Aspara Analyzer 改善項目

## 日付: 2025-08-08

## 高優先度

### 1. 性能最適化
- [ ] 非同期点群処理の効率化（現在実装済み、要検証）
- [ ] メモリ使用量削減（現在10-20MB、目標5-10MB）
- [ ] 処理時間短縮（現在100-200ms、目標50-100ms）

### 2. 品質向上
- [ ] アスパラガス形状認識の精度向上
- [ ] 真っ直ぐ度計算アルゴリズムの改善
- [ ] 収穫可能判定ロジックの最適化

### 3. 安定性向上
- [ ] エラーハンドリングの強化
- [ ] 異常データ（空の点群等）への対応
- [ ] メモリリーク対策の検証

## 中優先度

### 4. 機能追加
- [ ] アスパラガスの太さ測定機能
- [ ] 複数アスパラガスの同時分析
- [ ] 分析結果の統計情報出力
- [ ] RVizでの可視化改善

### 5. パラメータ調整
- [ ] 各種しきい値の自動調整機能
- [ ] 環境光条件への適応
- [ ] カメラ設置位置への適応

### 6. ログ・デバッグ
- [ ] 詳細なパフォーマンス統計
- [ ] 分析失敗時の詳細ログ
- [ ] デバッグ用可視化ツール

## 低優先度

### 7. インターフェース改善
- [ ] REST API提供
- [ ] Web UI作成
- [ ] モバイルアプリ連携

### 8. 拡張機能
- [ ] 他の野菜への対応
- [ ] 機械学習による品質予測
- [ ] データベース連携

## 技術的課題

### コードの課題
- [ ] 空のRCLCPP_FATALログメッセージを修正（警告解消）
- [ ] printf形式文字列の型不一致警告解消
- [ ] callback groupの適切な設定検証

### アーキテクチャ改善
- [ ] モジュール分割の検討
- [ ] 設定ファイルの外部化
- [ ] プラグインアーキテクチャの導入

## 現在の状況（2025-08-08）

### 完了済み
- ✅ 全パッケージのビルド成功
- ✅ CVX依存関係の削除
- ✅ 非同期点群処理の実装
- ✅ マルチスレッド対応

### 進行中
- 🔄 システム全体での動作テスト待ち
- 🔄 性能測定・ベンチマーク

### 次のアクション
1. システム起動テスト（./launch/start_fv.sh）
2. 各ノードの正常動作確認
3. アスパラ分析機能の動作検証
4. パフォーマンス測定

## 備考

- アスパラ分析は23-50cmの長さ範囲が収穫可能判定基準
- 真っ直ぐ度しきい値は0.7以上が必要
- 点群処理は現在無効化されている（enable_pointcloud_processing: false）